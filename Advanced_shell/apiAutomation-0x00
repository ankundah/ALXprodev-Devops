#!/bin/bash

# Set API URL and output files
API_URL="https://pokeapi.co/api/v2/pokemon/pikachu"
OUTPUT_FILE="data.json"
ERROR_FILE="errors.txt"

# Make the request with curl
# -s = silent mode (no progress bar)
# -o = output to file
# -w = write HTTP status code to a variable

HTTP_STATUS=$(curl -s -o "$OUTPUT_FILE" -w "%{http_code}" "$API_URL")

# Check if the request was successful (status 200)
if [ "$HTTP_STATUS" -eq 200 ]; then
    echo "✅ API request successful. Data saved to $OUTPUT_FILE"
else
    echo "❌ API request failed with status code $HTTP_STATUS" >> "$ERROR_FILE"
    echo "Timestamp: $(date)" >> "$ERROR_FILE"
    echo "--------------------------" >> "$ERROR_FILE"
    echo "Failed to fetch data for Pikachu." >> "$ERROR_FILE"
    echo "" >> "$ERROR_FILE"
    echo "⚠️ Check $ERROR_FILE for more info."
fi
